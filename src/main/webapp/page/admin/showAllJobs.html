<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin | Job Openings</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
body{
  background:#f8fafc;
  color:#1f2937;
}

.container{
  max-width:1100px;
  margin:40px auto;
  background:#ffffff;
  padding:30px;
  border-radius:16px;
  border:1px solid #e5e7eb;
}

h1{
  font-size:26px;
  margin-bottom:25px;
}

/* Table */
table{
  width:100%;
  border-collapse:collapse;
}

thead{
  background:#f1f5f9;
}

th, td{
  padding:14px 16px;
  text-align:left;
  font-size:14px;
}

th{
  font-weight:600;
  color:#334155;
}

tr{
  border-bottom:1px solid #e5e7eb;
}

tr:hover{
  background:#f8fafc;
}

.status{
  padding:6px 12px;
  border-radius:20px;
  font-size:12px;
  font-weight:600;
}

.status.OPEN{ background:#dcfce7; color:#166534; }
.status.CLOSED{ background:#fee2e2; color:#991b1b; }
.status.ON_HOLD{ background:#fef3c7; color:#92400e; }

button{
  padding:8px 14px;
  border:none;
  border-radius:8px;
  font-size:13px;
  font-weight:600;
  cursor:pointer;
  background:#2563eb;
  color:#ffffff;
}

button:hover{
  opacity:0.9;
}

@media(max-width:768px){
  table, thead, tbody, th, td, tr{
    display:block;
  }
  th{ display:none; }
}
</style>
</head>

<body>

<div class="container">
  <h1>Job Openings</h1>

  <table id="jobsTable">
    <thead>
      <tr>
        <th>Job Title</th>
        <th>Location</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <!-- Dynamic -->
    </tbody>
  </table>
</div>

<script>
document.addEventListener("DOMContentLoaded", loadJobs);

const BASE = "/JobPortalManagementSystem/page/admin";

function loadJobs() {
  fetch(`${BASE}/jobs`)
    .then(res => res.json())
    .then(jobs => {

      const tbody = document.querySelector("#jobsTable tbody");
      tbody.innerHTML = "";

      jobs.forEach(job => {
        const row = `
          <tr>
            <td>${job.title}</td>
            <td>${job.location}</td>
            <td>
              <span class="status ${job.status}">
                ${job.status}
              </span>
            </td>
            <td>
              <button onclick="viewApplicants(${job.jobId})">
                View Applicants
              </button>
            </td>
          </tr>
        `;
        tbody.innerHTML += row;
      });
    })
    .catch(err => console.error("Error loading jobs", err));
}

function viewApplicants(jobId) {
  window.location.href =
    `${BASE}/viewApplicant.html?jobId=${jobId}`;
}
</script>



</body>
</html>